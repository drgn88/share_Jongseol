# Vitis HLS 사용법
# 1. 작업환경 생성하기
![[Pasted image 20241001110837.png]]
### 1) Project -> Create Project 선택

### 2) Project 이름 및 경로 생성하기
![[화면 캡처 2024-10-01 111133.png]]
- Project name에 본인이 할 프로젝트 이름을 넣는다
  -> 필자의 경우, filter프로젝트이니 filter라는 이름을 넣음
- Location에 프로젝트 이름의 폴더를 만들 곳을 지정한다.
- 그러면 해당 Location에 Project name으로 된 폴더가 하나 생성된다.
- 해당 폴더에 vitis_hls에서 작업하는 모든 파일들이 관리된다
### 3) 보드 지정하기
![[Pasted image 20241001112148.png]]
- 해당 창이 나올 때까지 next로 넘어간다
- 해당 창이 나오면 빨간 박스(...)을 누른다
![[Pasted image 20241001112259.png]]
- Search에 "xc7z020clg400-1"을 타이핑 후 나오는 보드를 선택한 다음 ok를 누른다
  해당 보드가 zybo z7-20이다
![[Pasted image 20241001112405.png]]
- Part에 내가 선택해준 보드로 바뀌었는지 확인한다.
- Flow target에 "Vivado IP Flow Target"인지 확인 후 우측 하단에 Finish를 눌러 마친다
- 그러면 visual studio와 비슷한 UI가 나오게 된다

## 2. Souce 코드 추가하기
![[Pasted image 20241001112627.png]]
- 좌상단에 해당 창이 보일 것이다
- Source라고 되있는 곳을 우클릭 후, "Add Source file"을 선택 후, filter.h와 filter.cpp 파일을 추가해준다
- 추가된 파일을 더블 클릭하면 해당 파일의 코드를 볼 수 있다

## 3. IP로 합성하기
![[Pasted image 20241001113051.png]]
- 상위 메뉴에서 Project -> Project settings에 들어간다
![[Pasted image 20241001113146.png]]
- 해당 창이 뜨면 합성할 Top Function을 지정해줘야 한다
  *내가 HW로 구현할 기능이 적힌 코드를 지정해줘야 한다*
- Browse를 누른 후, filter HW의 기능이 담긴 filter.cpp을 Top function으로 지정해준다
![[Pasted image 20241001113424.png]]
- filter.cpp을 선택 후, Edit CFLAG를 선택한다
  *해당 과정은 filter.cpp의 헤더파일 경로를 지정해주어 정상적으로 컴파일되게 한다*
- 선택하여 나온 창에 "-I (Vitis 라이브러리->vision-> L1-> include 폴더의 경로) -std=c++0x" 를 넣어준다
  **따옴표는 포함하지 말 것**
- 추가해주고 Ok를 눌러 창을 닫아준다
![[Pasted image 20241001113051.png]]
- 다시 상단 메뉴에 Solution -> Run C Synthesis -> Active solution 메뉴를 누르고 창이 나오면 Ok를 눌러준다
- 이후에, 합성을 마치고 하단 Console창에 "Finished C Synthesis"가 나오면 정상적으로 IP 합성이 된 것이다
  **여기서 Error 메시지가 나오면 소스코드를 열어 해결해준다**

## 4. RTL 코드로 추출하기
- 합성한 IP를 Vivado에서 사용하기 위해 IP를 RTL 코드로 추출해줘야 한다
![[Pasted image 20241001113051.png]]
- Solution -> Export RTL 선택 후, Ok를 눌러준다
- 이후, 하단 콘솔창에 "Finished Export RTL/implementation"이 나오게 되면 정상적으로 RTL 추출이 완료된 것이다.